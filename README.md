# intrAuto
  
В npm - CoffeeScript-версия intrAuto  

В каталоге npm/JS/intrman модули, где основная логика. В каталоге npm/js обёртки вокруг модулей, предназначены для вызова из коммандной строки.

Установка зависимостей:
```bash
cd npm
npm i
```
  
node нет в зависимостях. Исхожу из того, что node установлен глобально. Иначе следует так же установить node:  
```bash
cd npm
npm i node
```
   
Зависимости постоянно обновляются, обновите зависимости и пересоберите, иначе не заработает:
```bash
cd npm
npm update
npm run recompile-all
```

npm/JS/zipack.js - делает некоторые проверки плюсует версию в скрипте и в манифесте, пакует в архив intrAuto/Zip.  
npm/JS/version-increase.js - плюсует версии не пакуя и не делая проверок.  
  
Вызов скрипта, например:  
```bash
# В нодах
node ./что/то/там/intrAuto/npm/JS/zipack.js

# Если mode файлов u+x
./что/то/там/intrAuto/npm/JS/zipack.js

#  В Python
python3 ./что/то/там/intrAuto/Python/zipack.py

# Если mode файлов u+x
./что/то/там/intrAuto/npm/Python/zipack.py
```
  
npm/src/CoffeeScript - исходники.  
  
zipack ожидант, что в settings.json, в разделе current установлено название виджета, а в разделе widget присутствует виджет с таким названием и там в разделе dir установлен подкаталог, где находится виджет  
  
В каталоге Python/intrman модули, где основная логика. В каталоге Python обёртки вокруг модулей, предназначены для вызова из коммандной строки.  
  
В Python:  
  
version-increase - плюсует версию в script.js и манифесте, обеспечивает одинаковую версию в манифесте.  
check-for-pr - по идее должен проверять всё регулярными выражениями перед ПР.  
checkout - обёртка вокруг git checkout, обновляет в настройках intrAuto запись о текущей ветке, запись нужна другим скриптам. Будет интерактивный вариант с выбором из списка по номеру.  
zipack - плюсует версию, проверяет регулярными выражениями, пакует в zip.  
push-with-pass - пушит автоматически вводя bitbucket app password (сейчас задаётся в тексте вручную, это плохая идея) при помощи pexpect. Я, впрочем, использую ключ ssh и пароль не ввожу.  
  
В intrAuto/settings:  
  
settings.json - все настройки  
  
Все скрипты ожидают правильных путей и кодов виджетов в файле настроек.  
  